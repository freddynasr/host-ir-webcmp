{"version":3,"names":["irChannelManagerCss","IrChannelManager","this","tabs","name","icon","children","connectionOffHandler","item","sendToParentHandler","event","anyChanges","detail","sendMappingToParentHandler","mapping","id","uuidv4","mode","selectedItem","listData","map","Object","assign","RoomsMapping","status","fetchApi","emit","activeTab","sidebar","document","querySelector","open","_reset","openSidebarHandler","loader","setTimeout","requestDelete","e","changeStatusHandler","componentDidLoad","openSidebar","addEventListener","dropdown","modal","closeModal","openModal","goNext","title","channel","group","property","hotelId","alertModal","IrMapping","_onSaveMapping","_onSwitchTab","tab","render","h","class","dropdownData","side","onClick","data","type","modalTitle","modalBody","iconAvailable","leftBtnActive","btnPosition","rightBtnText","rightBtnColor"],"sources":["src/components/ir-channel/ir-channel-manager/ir-channel-manager.css?tag=ir-channel-manager","src/components/ir-channel/ir-channel-manager/ir-channel-manager.tsx"],"sourcesContent":[":root {\n  --sidebar-width: 40rem;\n}\n#container {\n  padding: 1rem;\n  height: 100%;\n}\n.card {\n  height: 100%;\n}\n\n#ir-list-item {\n  height: 100%;\n}\n.cardBody {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n.emptyBody {\n  text-align: center;\n}\n.emptyBody img {\n  height: auto;\n  width: 100px;\n  transform: translate(7%, 0);\n  margin: 1rem;\n}\n\n.loader-position {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.card-head {\n  background: #f8f8f8;\n\n  padding: 0.3rem;\n}\n.section-title {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: bold;\n}\n.item-info {\n  border-bottom: 1px solid #e7e7e7;\n}\n\n.item-info .row .col-3:last-child {\n  text-align: end;\n}\n\n.list-group {\n  list-style: none;\n  border-bottom: 1px solid #e7e7e7;\n}\n\n.list-group li {\n  padding: 0.5rem;\n  color: #444;\n  transition: all 0.3s ease-out;\n}\n.list-group li:hover {\n  color: #7c83eb;\n}\n.list-group li.active {\n  border-bottom: 2px solid #7c83eb;\n  color: #7c83eb;\n}\n.btn-position {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  padding: 0.5rem;\n  background: #f8f8f8;\n  border-top: 1px solid #e7e7e7;\n}\n\n.test-icon {\n  margin-right: 0.2rem !important;\n}\n.text-dark:hover {\n  color: #444 !important;\n}\n","import { Component, h, Listen, Prop, State, Event, EventEmitter } from '@stencil/core';\nimport { v4 as uuidv4 } from 'uuid';\nimport { ChannelManager } from '../../../sample/channel/data';\n\n@Component({\n  tag: 'ir-channel-manager',\n  styleUrl: 'ir-channel-manager.css',\n})\nexport class IrChannelManager {\n  @Prop({ reflect: true }) dropdownData: {\n    name: string;\n    icon: string;\n    children: {\n      name: string;\n      icon: string;\n    }[];\n  } = {\n    name: 'Action',\n    icon: '',\n    children: [\n      {\n        name: 'Edit',\n        icon: 'ft-edit',\n      },\n      {\n        name: 'Delete',\n        icon: 'ft-trash',\n      },\n      {\n        name: 'Disable',\n        icon: 'ft-alert-triangle',\n      },\n    ],\n  };\n\n  @Prop({ reflect: true, mutable: true }) listData: ChannelManager[] = null;\n\n  @State() loader: boolean = false;\n  @State() mode: string = 'create';\n  tabs: string[] = ['General Settings', 'Mapping', 'Channel Settings'];\n  @State() activeTab: string = 'General Settings';\n  @State() selectedItem: ChannelManager = null;\n  @State() item: ChannelManager = null;\n  @State() anyChanges: boolean = false;\n\n  @Event({ bubbles: true, composed: true }) fetchApi: EventEmitter<ChannelManager[]>;\n  @Event({ bubbles: true, composed: true }) requestApiDelete: EventEmitter;\n\n  @Listen('connectionOff')\n  connectionOffHandler() {\n    this.item = null;\n  }\n\n  @Listen('sendToParent')\n  sendToParentHandler(event: CustomEvent) {\n    this.anyChanges = true;\n    this.item = event.detail;\n    //this.listData = [...this.listData, { ...event.detail, id: this.listData.length + 1, status: 'Active' }];\n  }\n\n  @Listen('sendMappingToParent')\n  sendMappingToParentHandler(event: CustomEvent) {\n    // Extract the mapping from the event detail\n    const mapping = event.detail;\n\n    const id = uuidv4();\n\n    // Flag to track changes\n    this.anyChanges = true;\n\n    // Update listData based on the mode\n    if (this.mode === 'edit' && this.selectedItem) {\n      this.listData = this.listData.map(item => {\n        if (item.id === this.selectedItem.id) {\n          return { ...this.item, RoomsMapping: mapping, status: 'Active', id: id };\n        }\n        return item;\n      });\n    } else {\n      if (this.listData === null) {\n        this.listData = [{ ...this.item, RoomsMapping: mapping, status: 'Active', id: id }];\n      } else {\n        this.listData = [...this.listData, { ...this.item, RoomsMapping: mapping, status: 'Active', id: id }];\n      }\n    }\n\n    // Emit the fetchApi event\n    this.fetchApi.emit(this.listData);\n\n    // Reset mode, sidebar, and state\n    this.mode = 'create';\n    this.activeTab = 'General Settings';\n    const sidebar = document.querySelector('ir-sidebar');\n    if (sidebar) {\n      sidebar.open = !sidebar.open;\n    }\n    this._reset();\n  }\n\n  _reset() {\n    this.item = null;\n    this.mode = 'create';\n    this.activeTab = 'General Settings';\n    this.selectedItem = null;\n    this.anyChanges = false;\n  }\n\n  @Listen('createNew')\n  openSidebarHandler() {\n    const sidebar = document.querySelector('ir-sidebar');\n    sidebar.open = !sidebar.open;\n    this.loader = true;\n    this.mode = 'create';\n    this.activeTab = 'General Settings';\n    setTimeout(() => {\n      this.loader = false;\n    }, 2000);\n  }\n\n  @Listen('sendDelete')\n  requestDelete(e: CustomEvent) {\n    this.fetchApi.emit(e.detail);\n  }\n\n  @Listen('changeStatus')\n  changeStatusHandler(event: CustomEvent) {\n    this.fetchApi.emit(event.detail);\n  }\n\n  componentDidLoad() {\n    // Add an event listener to the ir-topbar component\n    const openSidebar = document.querySelector('ir-topbar');\n    openSidebar.addEventListener('openSidebar', () => {\n      const sidebar = document.querySelector('ir-sidebar');\n      sidebar.open = !sidebar.open;\n      this.loader = true;\n      this.mode = 'create';\n      this.activeTab = 'General Settings';\n      setTimeout(() => {\n        this.loader = false;\n      }, 2000);\n    });\n\n    const dropdown = document.querySelector('ir-list-item');\n    dropdown.addEventListener('openSidebar', (e: CustomEvent) => {\n      if (e.detail.mode === 'edit') {\n        this.mode = 'edit';\n        this.selectedItem = e.detail.item;\n\n        const sidebar = document.querySelector('ir-sidebar');\n        sidebar.open = !sidebar.open;\n      }\n    });\n\n    const modal: any = document.querySelector('ir-modal.exit');\n\n    modal.addEventListener('confirmModal', () => {\n      sidebar.open = false;\n      modal.closeModal();\n      this._reset();\n    });\n\n    const sidebar = document.querySelector('ir-sidebar');\n    sidebar.addEventListener('irSidebarToggle', (event: CustomEvent) => {\n      if (event.detail == true && this.anyChanges) {\n        if (this.listData) {\n          modal.openModal();\n        }\n      } else {\n        sidebar.open = false;\n        this._reset();\n      }\n    });\n  }\n\n  goNext() {\n    if (this.activeTab == 'General Settings') {\n      if (!this.item.title || !this.item.channel || !this.item.group || !this.item.property || !this.item.hotelId) {\n        const alertModal: any = document.querySelector('ir-modal.alertModal-manager');\n        if (this.mode === 'edit') {\n          return;\n        }\n        alertModal.openModal();\n      } else {\n        this.activeTab = 'Mapping';\n        this.loader = true;\n        setTimeout(() => {\n          this.loader = false;\n        }, 2000);\n      }\n    } else if (this.activeTab == 'Mapping') {\n      const IrMapping = document.querySelector('ir-mapping');\n      IrMapping._onSaveMapping();\n    }\n  }\n\n  _onSwitchTab(tab) {\n    if (this.activeTab == 'General Settings') {\n      if (!this.item.title || !this.item.channel || !this.item.group || !this.item.property || !this.item.hotelId) {\n        const alertModal: any = document.querySelector('ir-modal.alertModal-manager');\n        if (this.mode == 'edit') {\n          return;\n        }\n        alertModal.openModal();\n      } else {\n        this.activeTab = tab;\n        this.loader = true;\n        setTimeout(() => {\n          this.loader = false;\n        }, 2000);\n      }\n    } else if (this.activeTab == 'Mapping') {\n      this.activeTab = tab;\n      this.loader = true;\n      setTimeout(() => {\n        this.loader = false;\n      }, 2000);\n    }\n  }\n\n  render() {\n    return [\n      <div id=\"container\">\n        <div class=\"card\">\n          <ir-topbar></ir-topbar>\n\n          <ir-list-item id=\"ir-list-item\" listData={this.listData} dropdownData={this.dropdownData}></ir-list-item>\n        </div>\n      </div>,\n      <ir-sidebar side=\"right\" class=\"\">\n        <div class=\"container pt-1\">\n          <h5 class=\"font-weight-bold\">{this.mode === 'create' ? 'Create' : 'Edit'} Channel</h5>\n        </div>\n        <ul class=\"list-group list-group-horizontal mb-2\">\n          {this.tabs.map(tab => (\n            <li class={this.activeTab === tab ? 'active' : ''}>\n              <a\n                class=\"\"\n                data-mdb-ripple-color=\"dark\"\n                onClick={() => {\n                  this._onSwitchTab(tab);\n                }}\n              >\n                {tab}\n              </a>\n            </li>\n          ))}\n        </ul>\n        {this.loader ? (\n          <div class=\"loader-position\">\n            <ir-loader></ir-loader>\n          </div>\n        ) : (\n          <span>\n            {this.activeTab == 'General Settings' && <ir-general-settings class=\"mb-3\" data={this.selectedItem} mode={this.mode}></ir-general-settings>}\n            {this.activeTab == 'Mapping' && <ir-mapping class=\"mb-3\" map={this.mode === 'edit' ? this.selectedItem.RoomsMapping : null}></ir-mapping>}\n          </span>\n        )}\n\n        <div class=\"btn-position\">\n          <button type=\"button\" class=\"btn btn-primary btn-sm btn-block\" onClick={() => this.goNext()}>\n            {this.activeTab == 'General Settings' ? 'Next' : 'Save'}\n          </button>\n        </div>\n      </ir-sidebar>,\n\n      <ir-modal class={'exit'} modalTitle=\"Exit without saving?\" modalBody=\"All unsaved changes will be lost.\" iconAvailable={true} icon=\"ft-alert-circle warning h1\"></ir-modal>,\n\n      <ir-modal\n        class=\"alertModal-manager\"\n        modalTitle=\"Please fill all the fields!\"\n        modalBody=\"There are fields that are not filled yet.\"\n        icon=\"ft-alert-circle warning h1\"\n        iconAvailable={true}\n        leftBtnActive={false}\n        btnPosition=\"center\"\n        rightBtnText=\"Close\"\n        rightBtnColor=\"primary\"\n      ></ir-modal>,\n    ];\n  }\n}\n"],"mappings":"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"}