import{r as t,c as i,h as s}from"./p-e56e81c3.js";import{h as l,_ as e,b as a,c as o}from"./p-ed750016.js";class r{constructor(){this.firstName="";this.lastName="";this.email="";this.altEmail="";this.password="";this.country=-1;this.city="";this.address="";this.mobile="";this.prefix="";this.newsletter=false;this.currency="";this.language=""}}class n extends r{constructor(){super(...arguments);this.firstNameValid=false;this.lastNameValid=false;this.emailValid=false;this.countryValid=false;this.passwordValid=false;this.mobileValid=false;this.prefixValid=false;this.setupData=false}}const d=".input-group-text{min-width:10rem;text-align:left}";const h=class{constructor(s){t(this,s);this.submitForm=i(this,"submitForm",7);this.getSetupData=i(this,"getSetupData",7);this.Model=new n;this.gotdata=false;this.submit=false;this.setupDataCountries=null;this.setupDataCountriesCode=null;this.data=null}componentWillLoad(){this.getSetupData.emit()}watchHandler(){console.log("The new value of data is: ",this.data);this.submit=false;if(this.data!==null){this.Model=Object.assign(Object.assign({},this.Model),this.data);this.Model.firstNameValid=this.data.firstName.trim()!==""&&this.data.firstName!==null?true:false;this.Model.lastNameValid=this.data.lastName.trim()!==""&&this.data.lastName!==null?true:false;this.Model.emailValid=this.data.email.trim()!==""&&this.data.email!==null?true:false;this.Model.countryValid=this.data.country!==null?true:false;this.Model.passwordValid=this.data.password.trim()!==""&&this.data.password!==null?true:false}else{this.Model=new n}}handleInputChange(t){this.submit=false;const i=t.target;const s=i.name;if(i.required!==undefined){const i=`${s}Valid`;if(s==="country"){this.Model[s]=parseInt(t.detail)}this.Model[s]=t.detail;this.Model[i]=t.detail!==-1||t.detail.trim()!==""&&t.detail!==null?true:false}else{this.Model[s]=t.detail}}handleSubmit(t){t.preventDefault();this.submit=true;if(this.Model.firstNameValid&&this.Model.lastNameValid&&this.Model.emailValid&&this.Model.countryValid&&this.Model.passwordValid){let t=Object.assign({},this.Model);this.submitForm.emit(t)}}render(){let t=null;let i=null;if(this.setupDataCountries!==null&&this.setupDataCountriesCode!==null){t=s("ir-select",{required:true,name:"country",submited:this.submit,label:"Country",bootstrapColActive:false,selectedValue:this.Model.country.toString(),data:this.setupDataCountries.map((t=>({value:t.value.toString(),text:t.text}))),firstOption:"..."});i=s("ir-select",{name:"prefix",label:"Mobile",submited:this.submit,bootstrapColActive:false,selectedValue:this.Model.prefix,data:this.setupDataCountriesCode.map((t=>({value:t.value.toString(),text:t.text}))),firstOption:"...",selectStyle:false,required:true})}return[s("h3",null,s("strong",null,"Guest Details")),s("div",{class:"card"},s("div",{class:"card-header"},s("h4",{class:"card-title"},"Registration date : ",s("strong",null,l().format("DD-MMM-YYYY")))),s("div",{class:"card-content collapse show"},s("div",{class:"card-body pt-0"},s("ir-input-text",{placeholder:"",label:"First Name",bootstrapColActive:false,name:"firstName",submited:this.submit,value:this.Model.firstName,required:true}),s("ir-input-text",{placeholder:"",label:"Last Name",bootstrapColActive:false,name:"lastName",submited:this.submit,value:this.Model.lastName,required:true}),s("ir-input-text",{placeholder:"",label:"Email",bootstrapColActive:false,name:"email",submited:this.submit,value:this.Model.email,required:true}),s("ir-input-text",{placeholder:"",label:"Alternative email",bootstrapColActive:false,name:"altEmail",value:this.Model.altEmail}),s("ir-input-text",{label:"Password",placeholder:"",name:"password",bootstrapColActive:false,submited:this.submit,type:"password",value:this.Model.password,required:true}),t,s("ir-input-text",{placeholder:"",label:"City",name:"city",bootstrapColActive:false,value:this.Model.city}),s("ir-input-text",{placeholder:"",label:"Address",name:"address",bootstrapColActive:false,value:this.Model.address}),i,s("ir-input-text",{"put-text":true,LabelAvailable:false,name:"mobile",bootstrapColActive:false,placeholder:"",submited:this.submit,value:this.Model.mobile,required:true}),s("ir-checkbox",{label:"NewsLetter",name:"newsletter",checked:this.Model.newsletter}),s("p",null,s("strong",null,"Last used:")," Language:",s("strong",null,this.Model.language)," --- Currency: ",s("strong",null,this.Model.currency)),s("hr",null),s("ir-button",{text:"Save",color:"btn-primary"}))))]}static get watchers(){return{data:["watchHandler"]}}};h.style=d;const c=class{constructor(s){t(this,s);this.handlePaymentItemChange=i(this,"handlePaymentItemChange",7);this.itemToBeAdded={PAYMENT_DATE:"",PAYMENT_AMOUNT:"",DESIGNATION:"",REFERENCE:"",PAYMENT_ID:""};this.item=undefined;this.newTableRow=false;this.confirmModal=false;this.toBeDeletedItem={}}_handleSave(){var t;if(this.item.My_Payment==null){this.item.My_Payment=[]}this.itemToBeAdded.PAYMENT_ID=((t=this.item.My_Payment[this.item.My_Payment.length-1])===null||t===void 0?void 0:t.PAYMENT_ID)+1||1;this.item.My_Payment=[...this.item.My_Payment,this.itemToBeAdded];console.log(this.item);this.handlePaymentItemChange.emit(this.item.My_Payment);this.itemToBeAdded={PAYMENT_DATE:"",PAYMENT_AMOUNT:"",DESIGNATION:"",REFERENCE:""}}handleConfirmModal(t){const i=this.item.My_Payment.filter((i=>i.PAYMENT_ID!==t.detail.PAYMENT_ID));this.item.My_Payment=i;this.confirmModal=!this.confirmModal;this.handlePaymentItemChange.emit(this.item.My_Payment);this.toBeDeletedItem={}}_renderTableRow(t,i="normal"){return s("div",{class:"row m-0"},s("div",{class:"col-9 p-0"},s("div",{class:"row m-0"},s("div",{class:"col-4  border-right-light p-0 border-bottom-light border-2"},i==="normal"?s("span",{class:"sm-padding-left"},e(t.PAYMENT_DATE)):s("input",{class:"border-0 w-100",onChange:t=>{this.itemToBeAdded.PAYMENT_DATE=t.target.value},type:"date"})),s("div",{class:"col-4 border-right-light d-flex p-0 justify-content-end border-bottom-light border-2 sm-padding-right"},i==="normal"?s("span",{class:"sm-padding-right"},"$",t.PAYMENT_AMOUNT):s("input",{class:"border-0 w-100",onChange:t=>{this.itemToBeAdded.PAYMENT_AMOUNT=t.target.value},type:"number"})),s("div",{class:"col-4 border-right-light p-0 border-bottom-light border-2 sm-padding-left"},i==="normal"?s("span",{class:"sm-padding-left"},t.DESIGNATION):s("input",{class:"border-0 w-100",onChange:t=>{this.itemToBeAdded.DESIGNATION=t.target.value},type:"text"})),s("div",{class:"col-12 border-right-light p-0 border-bottom-light border-2 sm-padding-left"},i==="normal"?s("span",{class:"sm-padding-left"},t.REFERENCE):s("input",{class:"border-0 w-100",onKeyPress:t=>{if(t.key==="Enter"){this.newTableRow=false;this._handleSave()}},onChange:t=>{this.itemToBeAdded.REFERENCE=t.target.value},type:"text"})))),s("div",{class:"col-3 d-flex align-items-center justify-content-between border-right-light border-bottom-light border-2"},s("ir-icon",{icon:"ft-save color-ir-light-blue-hover h5 pointer",onClick:i==="add"?()=>{this.newTableRow=false;this._handleSave()}:()=>{}}),s("ir-icon",{icon:"ft-trash-2 danger h5 pointer",onClick:i==="add"?()=>{this.newTableRow=false;this.itemToBeAdded={PAYMENT_DATE:"",PAYMENT_AMOUNT:"",DESIGNATION:"",REFERENCE:""}}:()=>{this.toBeDeletedItem=t;const i=document.querySelector(".delete-record-modal");i.openModal()}})))}directPayment(){var t,i,l,e,a,o,r,n,d,h,c,u,p,v,m,b,f,g,C;return s("div",null,s("strong",null,"Booking Guarantee"),s("div",null,((i=(t=this.item)===null||t===void 0?void 0:t.My_Guest)===null||i===void 0?void 0:i.CCN)&&"Card:"," ",s("span",null,((e=(l=this.item)===null||l===void 0?void 0:l.My_Guest)===null||e===void 0?void 0:e.CCN)||"")," ",((o=(a=this.item)===null||a===void 0?void 0:a.My_Guest)===null||o===void 0?void 0:o.CC_EXP_MONTH)&&"Expiry: ",s("span",null," ",((n=(r=this.item)===null||r===void 0?void 0:r.My_Guest)===null||n===void 0?void 0:n.CC_EXP_MONTH)||""," ",((h=(d=this.item)===null||d===void 0?void 0:d.My_Guest)===null||h===void 0?void 0:h.CC_EXP_YEAR)&&"/"+((u=(c=this.item)===null||c===void 0?void 0:c.My_Guest)===null||u===void 0?void 0:u.CC_EXP_YEAR))),s("div",null,((v=(p=this.item)===null||p===void 0?void 0:p.My_Guest)===null||v===void 0?void 0:v.CHN)&&"Name:"," ",s("span",null,((b=(m=this.item)===null||m===void 0?void 0:m.My_Guest)===null||b===void 0?void 0:b.CHN)||"")," ",((g=(f=this.item)===null||f===void 0?void 0:f.My_Guest)===null||g===void 0?void 0:g.CVC)&&"- CVC:"," ",s("span",null," ",((C=this.item.My_Guest)===null||C===void 0?void 0:C.CVC)||"")))}_renderDueDate(t){return s("div",{class:"fluid-container"},s("div",{class:"row mb-1"},s("div",{class:"col-xl-3 col-lg-4 col-md-2 col-sm-3 col-4 pr-0"},e(t.Date)),s("div",{class:"col-1 d-flex px-0 justify-content-end"},a(t.Amount,this.item.My_Currency.REF)),s("div",{class:"col-xl-3 col-lg-4 col-md-3 col-sm-3 col-4"},t.Description),s("span",{class:"ml-1 col-12 font-size-small collapse roomName"},t.Room)))}render(){var t,i;if(!this.item){return s("div",null)}return[s("div",{class:"card"},s("div",{class:"p-1"},s("div",{class:"mb-2 h4"},"Due Balance: ",s("span",{class:"danger font-weight-bold"},a(this.item.TOTAL_AMOUNT,this.item.My_Currency.REF))),this.item.IS_DIRECT&&this.directPayment(),s("div",{class:"mt-2"},s("div",null,s("div",{class:"d-flex align-items-center"},s("strong",{class:"mr-1"},"Payment due dates"),s("ir-icon",{id:"drawer-icon",icon:"ft-eye h2 color-ir-light-blue-hover","data-toggle":"collapse","data-target":`.roomName`,"aria-expanded":"false","aria-controls":"myCollapse",class:"sm-padding-right pointer"})),((t=this.item)===null||t===void 0?void 0:t.My_DueDates)&&((i=this.item)===null||i===void 0?void 0:i.My_DueDates.map((t=>this._renderDueDate(t)))))),s("div",{class:"mt-2"},s("strong",null,"Payments"),s("div",{class:"fluid-container border-top-light border-2 border-left-light font-size-small"},s("div",{class:"row m-0"},s("div",{class:"col-3 font-weight-bold border-right-light border-bottom-light border-2 p-0"},s("span",{class:"sm-padding-left"},"Date")),s("div",{class:"col-3 font-weight-bold border-right-light border-bottom-light border-2 p-0"},s("span",{class:"sm-padding-left"},"Amount")),s("div",{class:"col-3 font-weight-bold border-right-light border-bottom-light border-2 p-0 sm-padding-left"},s("span",{class:"sm-padding-left"},"Designation")),s("div",{class:"col-3 text-center border-right-light p-0 border-bottom-light border-2"},s("ir-icon",{id:"add-payment",icon:"ft-plus font-weight-bold color-ir-light-blue-hover pointer p-0",onClick:()=>{this.newTableRow=true}}))),this.item.My_Payment&&this.item.My_Payment.map((t=>this._renderTableRow(t))),this.newTableRow?this._renderTableRow(null,"add"):null)))),s("ir-modal",{item:this.toBeDeletedItem,class:"delete-record-modal",modalTitle:"Are you sure you want to delete this payment record?",modalBody:"If deleted it will be permnantly lost!",iconAvailable:true,icon:"ft-alert-triangle danger h1",leftBtnText:"Delete",rightBtnText:"Cancel",leftBtnColor:"danger",rightBtnColor:"primary"})]}};const u=class{constructor(s){t(this,s);this.pressCheckIn=i(this,"pressCheckIn",7);this.pressCheckOut=i(this,"pressCheckOut",7);this.item=undefined;this.currency="USD";this.mealCode=undefined;this.hasRoomEdit=false;this.hasRoomDelete=false;this.hasRoomAdd=false;this.hasCheckIn=false;this.hasCheckOut=false}handleClick(t){let i=t.target;if(i.id=="checkin"){this.pressCheckIn.emit(this.item)}else if(i.id=="checkout"){this.pressCheckOut.emit(this.item)}}_getFoodArrangeCat(t){const i=this.mealCode.find((i=>i.CODE_NAME===t));return i.CODE_VALUE_EN}render(){return s("div",{class:"p-1 d-flex"},s("ir-icon",{id:"drawer-icon",icon:"ft-eye h2 color-ir-dark-blue-hover","data-toggle":"collapse","data-target":`#roomCollapse-${this.item.BSA_ID}`,"aria-expanded":"false","aria-controls":"myCollapse",class:"sm-padding-right pointer"}),s("div",{class:"w-100"},s("div",{class:"d-flex justify-content-between"},s("div",null,s("strong",null,this.item.My_Room_type.My_Room_category.NAME||""," ")," ",this.mealCode&&this._getFoodArrangeCat(this.item.My_Room_type.FOOD_ARRANGE_CAT_CODE)," -"," ",this.item.My_Room_type.IS_NON_REFUNDABLE?"Refundable":"Non-refundable"," ",this.item.My_Room_type.My_Room_type_desc[0].CUSTOM_TXT||""),s("div",null,s("span",{class:"mr-1"},a(this.item.TOTAL_AMOUNT,this.currency)),this.hasRoomEdit&&s("ir-icon",{id:`roomEdit-${this.item.BSA_ID}`,icon:"ft-edit color-ir-dark-blue-hover h4 pointer"}),this.hasRoomDelete&&s("ir-icon",{id:`roomDelete-${this.item.BSA_ID}`,icon:"ft-trash-2 danger h4 pointer"}))),s("div",null,s("span",{class:"mr-1"},`${this.item.GUEST_FIRST_NAME||""} ${this.item.GUEST_LAST_NAME||""}`),this.item.ADULTS_NBR>0&&s("span",null," ",this.item.ADULTS_NBR," ",this.item.ADULTS_NBR>1?"Adults":"Adult"),this.item.CHILD_NBR>0&&s("span",null," ",this.item.CHILD_NBR," ",this.item.CHILD_NBR>1?"Children":"Child")),s("div",{class:"d-flex align-items-center"},s("span",{class:" mr-1"},e(this.item.FROM_DATE)," - ",e(this.item.TO_DATE)),this.item.UNIT&&s("span",{class:"light-blue-bg mr-2 "},this.item.UNIT),this.hasCheckIn&&s("ir-button",{id:"checkin",icon:"",class:"mr-1",btn_color:"info",size:"sm",text:"Check in"}),this.hasCheckOut&&s("ir-button",{id:"checkout",icon:"",btn_color:"info",size:"sm",text:"Check out"})),s("div",{class:"collapse",id:`roomCollapse-${this.item.BSA_ID}`},s("div",{class:"d-flex"},s("div",{class:" sm-padding-top"},s("strong",{class:"sm-padding-right"},"Rate Breakdown:")),s("div",{class:"sm-padding-top w-100 "},this.item.My_Bsad.length>0&&this.item.My_Bsad.map((t=>s("div",{class:"fluid-container"},s("div",{class:"row"},s("div",{class:"col-xl-2 col-lg-3 col-md-2 col-sm-3 col-7 pr-0"},o(t.ALLOTMENT_DATE))," ",s("div",{class:"col-1 px-0 d-flex justify-content-end"},a(t.TOTAL_AMOUNT,this.currency)))))))),s("div",{innerHTML:this.item.CANCELATION_POLICY_PHRASE||""}),s("ir-label",{label:"PrePayment:",value:this.item.My_Room_type.My_Translated_Prepayment_Policy||""}),s("ir-label",{label:"Smoking Preference:",value:this.item.My_Room_type.My_Translated_Cancelation_Policy||""}),s("ir-label",{label:"Meal Plan:",value:this.mealCode&&this._getFoodArrangeCat(this.item.FOOD_ARRANGE_CAT_CODE)}),s("ir-label",{label:"Special rate:",value:"Non-refundable"}))))}};export{h as ir_guest_info,c as ir_payment_details,u as ir_room};
//# sourceMappingURL=p-21dec162.entry.js.map