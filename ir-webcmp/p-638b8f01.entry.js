import{r as t,c as e,h as i}from"./p-e56e81c3.js";import{v as s}from"./p-d4c9256e.js";const n=class{constructor(i){t(this,i);this.clickHanlder=e(this,"clickHanlder",7);this.name=undefined;this.text=undefined;this.icon="ft-save";this.btn_color="primary";this.size="md";this.textSize="md";this.btn_block=true;this.btn_disabled=false;this.btn_type="button"}connectedCallback(){}disconnectedCallback(){}render(){let t="";if(this.btn_block){t="btn-block"}return i("button",{onClick:()=>{this.clickHanlder.emit()},class:`btn btn-${this.btn_color} btn-${this.size} text-${this.textSize} ${t}`,type:this.btn_type},i("i",{class:this.icon}),"Â ",this.text)}};const l=":root{--sidebar-width:40rem}#container{padding:1rem;height:100%}.card{height:100%}#ir-list-item{height:100%}.cardBody{display:flex;justify-content:center;align-items:center;height:100%}.emptyBody{text-align:center}.emptyBody img{height:auto;width:100px;transform:translate(7%, 0);margin:1rem}.loader-position{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.card-head{background:#f8f8f8;padding:0.3rem}.section-title{display:flex;align-items:center;justify-content:space-between;font-weight:bold}.item-info{border-bottom:1px solid #e7e7e7}.item-info .row .col-3:last-child{text-align:end}.list-group{list-style:none;border-bottom:1px solid #e7e7e7}.list-group li{padding:0.5rem;color:#444;transition:all 0.3s ease-out}.list-group li:hover{color:#7c83eb}.list-group li.active{border-bottom:2px solid #7c83eb;color:#7c83eb}.btn-position{position:absolute;bottom:0;left:0;width:100%;padding:0.5rem;background:#f8f8f8;border-top:1px solid #e7e7e7}.test-icon{margin-right:0.2rem !important}.text-dark:hover{color:#444 !important}";const a=class{constructor(i){t(this,i);this.fetchApi=e(this,"fetchApi",7);this.tabs=["General Settings","Mapping","Channel Settings"];this.dropdownData={name:"Action",icon:"",children:[{name:"Edit",icon:"ft-edit"},{name:"Delete",icon:"ft-trash"},{name:"Disable",icon:"ft-alert-triangle"}]};this.listData=[];this.loader=false;this.mode="create";this.activeTab="General Settings";this.selectedItem={};this.item={};this.anyChanges=false}sendToParentHandler(t){this.anyChanges=true;this.item=t.detail}sendMappingToParentHandler(t){this.anyChanges=true;console.log(t.detail);const e=t.detail;if(this.mode==="edit"){this.listData=this.listData.map((t=>{if(t.id===this.selectedItem.id){return Object.assign(Object.assign({},this.item),{mapping:e})}return t}));this.fetchApi.emit(Object.assign(Object.assign({},this.item),{mapping:e,status:"Active",id:s()}));this.mode="create";this.activeTab="General Settings";const t=document.querySelector("ir-sidebar");t.open=!t.open;this._reset();return}if(this.listData&&this.listData.length>0){this.listData=[...this.listData,Object.assign(Object.assign({},this.item),{mapping:e,status:"Active",id:s()})]}else{this.listData=[Object.assign(Object.assign({},this.item),{mapping:e,status:"Active",id:s()})]}console.log(this.listData);this.fetchApi.emit(Object.assign(Object.assign({},this.item),{mapping:e,status:"Active",id:s()}));const i=document.querySelector("ir-sidebar");i.open=!i.open;this._reset()}_reset(){this.item={};this.mode="create";this.activeTab="General Settings";this.selectedItem={};this.anyChanges=false}openSidebarHandler(t){console.log(t);const e=document.querySelector("ir-sidebar");e.open=!e.open;this.loader=true;this.mode="create";this.activeTab="General Settings";setTimeout((()=>{this.loader=false}),2e3)}componentDidLoad(){const t=document.querySelector("ir-topbar");t.addEventListener("openSidebar",(()=>{console.log("openSidebar");const t=document.querySelector("ir-sidebar");t.open=!t.open;this.loader=true;this.mode="create";this.activeTab="General Settings";setTimeout((()=>{this.loader=false}),2e3)}));const e=document.querySelector("ir-list-item");e.addEventListener("openSidebar",(t=>{if(t.detail.mode==="edit"){this.mode="edit";this.selectedItem=t.detail.item;console.log(this.selectedItem);const e=document.querySelector("ir-sidebar");e.open=!e.open}}));const i=document.querySelector("ir-modal.exit");i.addEventListener("confirmModal",(t=>{console.log(t.detail);s.open=false;i.closeModal();this._reset()}));const s=document.querySelector("ir-sidebar");s.addEventListener("irSidebarToggle",(t=>{if(t.detail==true&&this.anyChanges){if(this.listData){i.openModal()}}else{s.open=false;this._reset()}}))}goNext(){if(this.activeTab=="General Settings"){if(!this.item.title||!this.item.channel||!this.item.group||!this.item.property||!this.item.hotelId){alert("Please fill all the fields")}else{this.activeTab="Mapping";this.loader=true;setTimeout((()=>{this.loader=false}),2e3)}}else if(this.activeTab=="Mapping"){const t=document.querySelector("ir-mapping");t._onSaveMapping()}}_exitWithoutSave(){return i("div",{class:"row"},i("div",{class:"col-2 d-flex justify-content-center "},i("ir-icon",{icon:"ft-alert-circle warning h1"})),i("div",{class:"col-10"},i("div",{class:"font-weight-bold"},"Exit without saving?"),i("br",null),i("div",{class:"font-size-small"},"All unsaved changes will be lost.")))}render(){return[i("div",{id:"container"},i("div",{class:"card"},i("ir-topbar",null),i("ir-list-item",{id:"ir-list-item",listData:this.listData,dropdownData:this.dropdownData}))),i("ir-sidebar",{side:"right",class:"font-size-small"},i("div",{class:"container pt-1"},i("h5",{class:"font-weight-bold"},this.mode==="create"?"Create":"Edit"," Channel")),i("ul",{class:"list-group list-group-horizontal mb-2"},this.tabs.map((t=>i("li",{class:this.activeTab===t?"active":""},i("a",{class:"","data-mdb-ripple-color":"dark",onClick:()=>{this.activeTab=t;this.loader=true;setTimeout((()=>{this.loader=false}),2e3)}},t))))),this.loader?i("div",{class:"loader-position"},i("ir-loader",null)):i("span",null,this.activeTab=="General Settings"&&i("ir-general-settings",{data:this.selectedItem,mode:this.mode}),this.activeTab=="Mapping"&&i("ir-mapping",{map:this.selectedItem})),i("div",{class:"btn-position"},i("button",{type:"button",class:"btn btn-primary btn-sm btn-block",onClick:()=>this.goNext()},this.activeTab=="General Settings"?"Next":"Save"))),i("ir-modal",{class:"exit"},this._exitWithoutSave())]}};a.style=l;const o=".dropdown-menu{position:absolute !important;top:100%;right:0;z-index:1000;display:none;}.dropdown.nav-item.show .dropdown-menu{display:block;}";const r=class{constructor(i){t(this,i);this.dropdownItemCLicked=e(this,"dropdownItemCLicked",7);this.data=null;this.object=null;this.show=false}render(){let t=null;if(this.data!==null){t=i("li",{class:this.show?"dropdown nav-item show":"dropdown nav-item","data-menu":"dropdown"},i("a",{class:"dropdown-toggle nav-link",onClick:()=>{this.show=!this.show},"data-toggle":"dropdown"},i("ir-icon",{icon:this.data.icon}),i("span",{"data-i18n":"Dashboard",class:"text-primary"},this.data.name)),i("ul",{class:this.show?"dropdown-menu show":"dropdown-menu"},this.data.children.map((t=>i("li",{"data-menu":""},i("a",{class:"dropdown-item","data-toggle":"",onClick:()=>{this.dropdownItemCLicked.emit({name:t.name,object:this.object});this.show=false}},i("ir-icon",{icon:t.icon}),i("span",{"data-i18n":t.name},t.name)))))))}return i("ul",{class:"nav navbar-nav",id:"main-menu-navigation","data-menu":"menu-navigation"},t)}};r.style=o;const d=class{constructor(i){t(this,i);this.sendToParent=e(this,"sendToParent",7);this.testLoader=false;this.mode=undefined;this.connectionStatus="Not connected";this.data={id:"123456",channel:"Channel Name",group:"Group",title:"Title",property:"Property",hotelId:"hotelId"};this.selectedChannel="";this.connected=false}componentDidLoad(){console.log("this.data",this.data);const t=document.querySelector("ir-select#channel-select");console.log("channelSelect",t);t.addEventListener("selectChange",(t=>{this.selectedChannel=t.detail;this.data=Object.assign(Object.assign({},this.data),{channel:t.detail})}));const e=document.querySelector("ir-select#group-select");e.addEventListener("selectChange",(t=>{this.data=Object.assign(Object.assign({},this.data),{group:t.detail})}));const i=document.querySelector("ir-input-text#title-input");i.addEventListener("textChange",(t=>{this.data=Object.assign(Object.assign({},this.data),{title:t.detail})}));const s=document.querySelector("ir-select#property-select");s.addEventListener("selectChange",(t=>{this.data=Object.assign(Object.assign({},this.data),{property:t.detail})}))}componentDidUpdate(){const t=document.querySelector("ir-input-text#hotel-id");t.addEventListener("textChange",(t=>{this.connected=false;this.connectionStatus="Not connected";this.data=Object.assign(Object.assign({},this.data),{hotelId:t.detail.trim()})}));const e=document.querySelector("ir-select#minimum-stay-select");e.addEventListener("selectChange",(t=>{console.log("minimumStay",t.detail);this.data=Object.assign(Object.assign({},this.data),{minimumStay:t.detail.trim()})}))}testConnection(){if(!this.data.hotelId){const t=document.querySelector("ir-modal.alertFields");t.openModal()}this.testLoader=true;setTimeout((()=>{this.testLoader=false;if(this.data.hotelId=="123456"){console.log("testConnection",this.data.hotelId);this.connected=true;this.connectionStatus=" Connected";this.sendToParent.emit(this.data);console.log("this.data",this.data)}else{this.connected=false}}),2e3)}_alert(t){return i("div",{class:"row"},i("div",{class:"col-2 d-flex justify-content-center "},i("ir-icon",{icon:"ft-alert-triangle warning h1"})),i("div",{class:"col-10"},i("div",{class:"font-weight-bold h3"},t)))}render(){return[i("div",{class:"General Settings"},i("div",{class:"container-fluid"},this.mode=="edit"&&i("div",{class:"text-light border-bottom-light mb-2"},`ID ${this.data.id}`),i("div",{class:"column"},i("ir-select",{id:"channel-select",label:"Channel",data:[{value:"expedia",text:"Expedia"},{value:"zourouna",text:"Zourouna"}],"label-background":"white","label-position":"right","label-border":"none",size:"sm",textSize:"sm",labelWidth:4,selectedValue:this.data.channel}),i("ir-select",{id:"group-select",label:"Group",data:[{value:"all",text:"All"}],"label-background":"white","label-position":"right","label-border":"none",size:"sm",textSize:"sm",labelWidth:4,selectedValue:this.data.group}),i("ir-input-text",{id:"title-input",label:"Title",placeholder:"Title",value:this.data.title,"label-background":"white","label-position":"right","label-border":"none",size:"sm",labelWidth:4}),i("ir-select",{id:"property-select",label:"Propery",data:[{value:"Mist",text:"Mist"}],"label-background":"white","label-position":"right","label-border":"none",size:"sm",textSize:"sm",labelWidth:4,selectedValue:this.data.property}))),this.selectedChannel&&i("div",{class:"container-fluid mt-1"},i("div",{class:"text-light border-bottom-light mb-2"},"Connection Settings"),i("div",{class:"row"},i("ir-input-text",{id:"hotel-id",label:"Hotel ID",placeholder:"Hotel ID",value:this.data.hotelId,"label-background":"white","label-position":"right","label-border":"none",size:"sm",labelWidth:4,class:"col-12"}),i("ir-select",{id:"minimum-stay-select",label:"Minimum Stay Type",data:[{value:"arrival",text:"Arrival"}],"label-background":"white","label-position":"right","label-border":"none",size:"sm",textSize:"sm",class:"col-12",labelWidth:4,selectedValue:this.data.minimumStay}),i("div",{class:"col-12 pb-1 "},i("div",{class:"row"},i("div",{class:"col-4"}),i("div",{class:"col-8 d-flex justify-content-between align-items-center"},i("div",null,this.testLoader?i("ir-loader",{size:"xs"}):i("span",null,i("ir-icon",{class:"test-icon",icon:this.connected?"ft-check-circle success":"ft-alert-triangle warning"}),this.connected&&this.connectionStatus,!this.connected&&this.connectionStatus)),!this.connected&&i("button",{onClick:()=>this.testConnection(),class:"btn btn-white border-light btn-sm text-dark "},"Test Connection")))))),i("ir-modal",{class:"alertFields",leftBtnActive:false,btnPosition:"center",rightBtnText:"Close",rightBtnColor:"primary"},this._alert("Please fill in all the fields")))]}};const c=class{constructor(e){t(this,e);this.icon="ft-check"}connectedCallback(){}disconnectedCallback(){}render(){return i("i",{class:this.icon})}};const h=class{constructor(i){t(this,i);this.textChange=e(this,"textChange",7);this.name=undefined;this.value=undefined;this.label="<label>";this.placeholder="<placeholder>";this.required=undefined;this.LabelAvailable=true;this.type="text";this.submited=false;this.inputStyle=true;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground="light";this.labelColor="dark";this.labelBorder="none";this.labelWidth=3;this.valid=undefined;this.initial=true}connectedCallback(){}disconnectedCallback(){}watchHandler(t){if(t!==""&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}handleInputChange(t){this.initial=false;if(this.required){this.valid=t.target.checkValidity();const e=t.target.value;this.textChange.emit(e)}else{this.textChange.emit(t.target.value)}}render(){let t="form-control";let e=i("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor} border-${this.labelBorder}`},i("label",{class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} bg-${this.labelBackground} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(!this.LabelAvailable){e=""}if(this.inputStyle===false){t=""}if(this.required&&!this.valid&&!this.initial){t=`${t} border-danger`}return i("div",{class:"form-group"},i("div",{class:"input-group row m-0"},e,i("input",{type:this.type,class:`${t} form-control-${this.size} text-${this.textSize} col-${12-this.labelWidth}`,placeholder:this.placeholder,value:this.value,onInput:this.handleInputChange.bind(this),required:this.required})))}static get watchers(){return{value:["watchHandler"],submited:["watchHandler2"]}}};const p=class{constructor(i){t(this,i);this.openSidebar=e(this,"openSidebar",7);this.createNew=e(this,"createNew",7);this.type="";this.dropdownData={name:"Action",icon:"",children:[{name:"Edit",icon:"ft-edit"},{name:"Delete",icon:"ft-trash"},{name:"Disable",icon:"ft-alert-triangle"}]};this.dropdownDataDisable={name:"Action",icon:"",children:[{name:"Edit",icon:"ft-edit"},{name:"Delete",icon:"ft-trash"},{name:"Enable",icon:"ft-check"}]};this.listData=[{title:"Title",channel:"Channel",status:"Status",id:"1",group:"All",property:"Twins",hotelId:"123"}]}addEventListenerToDropdown(t){const e=document.querySelector(`ir-dropdown.dropdown-action-${t.id}`);if(e){const i=e=>{if(e.detail.name==="Edit"){this.handleCreate("edit",t)}else if(e.detail.name==="Delete"){this.onPressDelete(t)}else if(e.detail.name==="Disable"){this.onPressDisable(t)}else if(e.detail.name==="Enable"){this.onPressDisable(t)}};e.addEventListener("dropdownItemCLicked",i)}}handleCreate(t,e){this.openSidebar.emit({mode:t,item:e})}onPressDelete(t){this.type="delete";const e=document.querySelector(`ir-modal`);console.log("modal",e);if(e){e.item=t;e.openModal()}}doAction(t){const e=t.detail;if(this.type==="delete"){this.listData=this.listData.filter((t=>t.id!==e.id))}else if(this.type==="disable"){this.listData=this.listData.map((t=>{if(t.id===e.id){t.status="Disabled"}return t}))}else if(this.type==="enable"){this.listData=this.listData.map((t=>{if(t.id===e.id){t.status="Active"}return t}))}}onPressDisable(t){this.type=t.status==="Active"?"disable":"enable";const e=document.querySelector(`ir-modal`);if(e){e.openModal();e.item=t}}componentDidLoad(){this.listData.forEach((t=>{this.addEventListenerToDropdown(t)}))}componentDidUpdate(){console.log("componentDidUpdate");this.listData.forEach((t=>{this.addEventListenerToDropdown(t)}))}_renderEmptyState(){return i("div",{class:"cardBody"},i("div",{class:"emptyBody"},i("img",{src:"./my-assets/5058446.png",alt:"empty",class:"img-fluid emptyImg"}),i("p",{class:"font-size-small"},"You don't have any channels yet.",i("br",null),"It's a good time to create",i("a",{class:"text-primary openSidebar",onClick:()=>this.createNew.emit({mode:"create",item:null})}," ","new"))))}_renderItem(){return i("div",null,i("div",{class:"container-fluid"},this.listData.map((t=>i("div",{class:"row"},i("div",{class:"col-12 item-info"},i("div",{class:"row"},i("div",{class:"col-3 p-1"},t.title),i("div",{class:"col-3 p-1"},t.channel),i("div",{class:"col-3 p-1"},t.status),i("div",{class:"col-3 "},i("ir-dropdown",{class:`dropdown-action-${t.id}`,data:t.status==="Active"?this.dropdownData:this.dropdownDataDisable,object:t})))))))))}_confirmDelete(){return i("div",{class:"row"},i("div",{class:"col-2 d-flex justify-content-center "},i("ir-icon",{icon:"ft-trash danger h1"})),i("div",{class:"col-10"},i("div",{class:"font-weight-bold"},"Are you sure you want to delete?"),i("br",null),i("div",{class:"font-size-small"},"What you delete here will be permanently deleted.")))}_enable_disable(){return i("div",{class:"row"},i("div",{class:"col-2 d-flex justify-content-center "},i("ir-icon",{icon:"ft-alert-circle warning h1"})),i("div",{class:"col-10"},i("div",{class:"font-weight-bold"},"Would you like to ",this.type," this channel?"),i("br",null)))}render(){return[this.listData.length>0?this._renderItem():this._renderEmptyState(),i("ir-modal",null,this.type==="delete"?this._confirmDelete():this._enable_disable())]}};const u=".lds-default.xs{scale:0.25}.lds-default.sm{scale:0.5}.lds-default.md{scale:1}.lds-default.lg{scale:1.5}.lds-default{display:inline-block;position:relative;width:80px;height:80px}.lds-default div{position:absolute;width:6px;height:6px;background:#000;border-radius:50%;animation:lds-default 1.2s linear infinite}.lds-default div:nth-child(1){animation-delay:0s;top:37px;left:66px}.lds-default div:nth-child(2){animation-delay:-0.1s;top:22px;left:62px}.lds-default div:nth-child(3){animation-delay:-0.2s;top:11px;left:52px}.lds-default div:nth-child(4){animation-delay:-0.3s;top:7px;left:37px}.lds-default div:nth-child(5){animation-delay:-0.4s;top:11px;left:22px}.lds-default div:nth-child(6){animation-delay:-0.5s;top:22px;left:11px}.lds-default div:nth-child(7){animation-delay:-0.6s;top:37px;left:7px}.lds-default div:nth-child(8){animation-delay:-0.7s;top:52px;left:11px}.lds-default div:nth-child(9){animation-delay:-0.8s;top:62px;left:22px}.lds-default div:nth-child(10){animation-delay:-0.9s;top:66px;left:37px}.lds-default div:nth-child(11){animation-delay:-1s;top:62px;left:52px}.lds-default div:nth-child(12){animation-delay:-1.1s;top:52px;left:62px}@keyframes lds-default{0%,20%,80%,100%{transform:scale(1)}50%{transform:scale(1.5)}}";const m=class{constructor(e){t(this,e);this.size="md"}render(){return i("div",{class:`lds-default ${this.size}`},i("div",null),i("div",null),i("div",null),i("div",null),i("div",null),i("div",null),i("div",null),i("div",null),i("div",null),i("div",null),i("div",null),i("div",null))}};m.style=u;const f=[{id:"1",title:"Room Type 1",number_of_people:2,ratePlans:[{id:"1",name:"Rate Plan 1",price:100},{id:"2",name:"Rate Plan 2",price:200}]},{id:"2",title:"Room Type 2",number_of_people:4,ratePlans:[{id:"1",name:"Rate Plan 1",price:100},{id:"2",name:"Rate Plan 2",price:200}]},{id:"3",title:"Room Type 3",number_of_people:5,ratePlans:[{id:"1",name:"Rate Plan 1",price:100},{id:"2",name:"Rate Plan 2",price:200}]}];const b=[{id:"1",name:"Map Room Type 1",value:"RT1",number_of_people:2,services:[{id:"MAPROOOMTYPE1_1",name:"Rate Plan Type 1 Type 1",value:"ST1"},{id:"MAPROOMTYPE1_2",name:"Rate Plan Type 1 Type 2",value:"ST2"}]},{id:"2",name:"Map Room Type 2",value:"RT2",number_of_people:4,services:[{id:"MAPROOMTYPE2_1",name:"Rate Plan Type 2 Type 1",value:"ST1"},{id:"MAPROOMTYPE2_2",name:"Rate Plan Type 2 Type 2",value:"ST2"}]},{id:"3",name:"Map Room Type 3",value:"RT3",number_of_people:5,services:[{id:"MAPROOMTYPE3_1",name:"Rate Plan Type 3 Type 1",value:"ST1"},{id:"MAPROOMTYPE3_2",name:"Rate Plan Type 3 Type 2",value:"ST2"}]}];const g=class{constructor(i){t(this,i);this.sendMappingToParent=e(this,"sendMappingToParent",7);this.mapRoom=b;this.hostRoom=f;this.mapped=[];this.mappingWithServices=[];this.map={};this.mapState=undefined;this.selectedMap=[]}mapChangedHandler(t){this.mapState=new Array(t.mapping.length).fill("notMapped")}async _onSaveMapping(){console.log(this.mapState);this.sendMappingToParent.emit(this.mapped)}componentWillLoad(){console.log(this.map.mapping);this.mapped=this.map.mapping||[];let t=new Array(this.hostRoom.length).fill({room:"notMapped",plans:this.hostRoom.map((t=>new Array(t.ratePlans.length).fill({plan:"notMapped",selectedPlan:""})))});if(this.map.mapping!=undefined){this.map.mapping.forEach((e=>{console.log(e,e.mappedRoomID);const i=this.hostRoom.findIndex((t=>t.id===e.mappedRoomID));if(i!==-1){t[i]={room:"mapped",plans:e.selectedPlans.map((t=>{console.log(t);const e=this.mapRoom[i].services.findIndex((e=>e.id===t.id));if(e!==-1){return{plan:"mapped",selectedPlan:t.id}}else{return{plan:"notMapped",selectedPlan:""}}}))}}else{return{room:"notMapped",plans:this.hostRoom.map((t=>new Array(t.ratePlans.length).fill("notMapped")))}}}))}else{t=new Array(this.hostRoom.length).fill({room:"notMapped",plans:this.hostRoom.map((t=>new Array(t.ratePlans.length).fill({plan:"notMapped",selectedPlan:""})))})}this.mapState=t;console.log(this.mapState)}_onSelectMap(t,e){const i=JSON.parse(e);const s={mappingId:this.mapped.length+1,initialRoomID:t.id,mappedRoomID:i.id,availableRatePlans:i.services};if(this.mapped.length==0){this.mapped=[s]}else{const e=this.mapped.findIndex((e=>t.id==e.initialRoomID&&e.mappedRoomID==i.id));if(e==1){this.mapped[e]=s}else{this.mapped=[...this.mapped,s]}}}_onSelectRatePlan(t){const e=t.mappingId;this.mapped=this.mapped.map((i=>{if(i.mappingId===e){const e=i.selectedPlans||[];const s=t.availableRatePlans.find((e=>e.id===t.selectedPlan));console.log(s);return Object.assign(Object.assign({},i),{selectedPlans:[...e,s]})}return i}))}_deleteMapping(t){console.log(t);const e=this.mapped.findIndex((e=>e.initialRoomID===t.id));if(e!==-1){this.mapped.splice(e,1)}}_getMapNameFromId(t){if(this.mapped.length===0){return}const e=this.mapped.find((e=>e.initialRoomID===t));if(!e||e==undefined){return}const i=e.mappedRoomID;const s=this.mapRoom.find((t=>t.id===i));return[s.name,s.number_of_people]}_deleteRatePlan(t){console.log(t);console.log(this.mapped);this.mapped=this.mapped.map((e=>{const i=e.selectedPlans.findIndex((e=>e.id===t));if(i!==-1){const t=e.selectedPlans[i];e.availableRatePlans=[...e.availableRatePlans,t];e.selectedPlans.splice(i,1)}return e}))}_getRatePlanNameFromId(t){for(let e of this.mapped){for(let i of e.selectedPlans){if(i.id===t){return i.name}}}return undefined}_renderMapping(t,e,s){let n=this.mapped.find((e=>e.initialRoomID===t.id));const l=this.mapRoom.filter((t=>{const e=this.mapped.findIndex((e=>e.mappedRoomID===t.id));if(e===-1){return t}}));if(n===null||n===void 0?void 0:n.selectedPlans){n.availableRatePlans=n.availableRatePlans.filter((t=>{const e=n.selectedPlans.includes(t);return!e}))}let a=[];if(n!==undefined){a=n.availableRatePlans}return i("div",{class:"col-12 mb-1"},i("div",{class:"row mb-1"},i("div",{class:"col-6 d-flex justify-content-between align-items-center"},t.title,i("ir-icon",{icon:"la la-long-arrow-right"})),i("div",{class:`col-6 `},e.room==="notMapped"?i("div",{class:"text-danger",onClick:()=>{const e=document.querySelector(`select[id="${s}"]`);this.mapState=[...this.mapState.slice(0,s),{room:"mapping",plans:new Array(t.ratePlans.length).fill({plan:"notMapped",selectedPlan:""})},...this.mapState.slice(s+1)];setTimeout((()=>{e.click()}),100)}},"Not mapped"):e.room==="mapping"?i("select",{id:s,class:"form-control form-control-sm",onChange:e=>{this._onSelectMap(t,e.target.value);if(e.target.value!==""){this.mapState=[...this.mapState.slice(0,s),{room:"mapped",plans:new Array(t.ratePlans.length).fill({plan:"notMapped",selectedPlan:""})},...this.mapState.slice(s+1)]}}},i("option",{value:""},"Select Room"),l.map((e=>{if(this.map.mapping!==undefined){const s=this.map.mapping.findIndex((e=>e.itemId===t.id));if(s!==-1){return i("option",{value:JSON.stringify(e),selected:e.id===this.map.mapping[s].mappedId},e.name)}else{return i("option",{value:JSON.stringify(e)},e.name)}}else{return i("option",{value:JSON.stringify(e)},e.name)}}))):i("div",{class:"d-flex flex-grow-1 justify-content-between"},i("div",{class:"text-primary"},this._getMapNameFromId(t.id)[0],i("ir-icon",{icon:"ft-user"})," ",this._getMapNameFromId(t.id)[1]),i("ir-icon",{icon:"text-primary ft-trash",onClick:()=>{this._deleteMapping(t);this.mapState=[...this.mapState.slice(0,s),{room:"notMapped",plans:new Array(t.ratePlans.length).fill("notMapped")},...this.mapState.slice(s+1)]}})))),i("div",{class:"col-12 mb-1"},t.ratePlans&&t.ratePlans.length&&t.ratePlans.map(((l,o)=>i("div",{class:"row mb-1"},i("div",{class:"col-6 d-flex justify-content-between align-items-center"},i("div",null,l.name,i("ir-icon",{icon:"ft-user"})," ",t.number_of_people),e.room==="mapped"&&i("ir-icon",{icon:"la la-long-arrow-right"})),i("div",{class:"col-6 pr-0"},e.room==="mapped"&&(e.plans[o].plan==="notMapped"?i("div",{class:"text-danger",onClick:()=>{const t=document.querySelector(`select[id="${s}"]`);this.mapState=[...this.mapState.slice(0,s),{room:"mapped",plans:[...e.plans.slice(0,o),{plan:"mapping",selectedPlan:""},...e.plans.slice(o+1)]},...this.mapState.slice(s+1)];setTimeout((()=>{t.click()}),100)}},"Not mapped"):e.plans[o].plan==="mapping"?i("select",{class:"form-control form-control-sm",onChange:t=>{n.selectedPlan=t.target.value;this._onSelectRatePlan(n);if(t.target.value!==""){this.mapState=[...this.mapState.slice(0,s),{room:"mapped",plans:[...e.plans.slice(0,o),{plan:"mapped",selectedPlan:t.target.value},...e.plans.slice(o+1)]},...this.mapState.slice(s+1)]}}},i("option",{value:""},"Select Plan"),a.length>0&&a.map((t=>i("option",{value:t.id},t.name)))):i("div",{class:"d-flex flex-grow-1 justify-content-between"},i("div",{class:"text-primary"},this._getRatePlanNameFromId(e.plans[o].selectedPlan),i("ir-icon",{icon:"ft-user"})," ",this._getMapNameFromId(t.id)[1]),i("ir-icon",{icon:"text-primary ft-trash",onClick:()=>{this._deleteRatePlan(e.plans[o].selectedPlan);this.mapState=[...this.mapState.slice(0,s),{room:"mapped",plans:[...e.plans.slice(0,o),{plan:"notMapped",selectedPlan:""},...e.plans.slice(o+1)]},...this.mapState.slice(s+1)]}})))))))))}render(){return i("div",{class:"Mapping"},i("div",{class:"d-flex justify-content-end align-items-center"},i("a",{class:"text-primary"},"Refresh")),i("div",{class:"container-fluid"},i("div",{class:"row"},i("div",{class:"col-12 mb-1"},i("div",{class:"row "},i("div",{class:"col-6 d-flex justify-content-between align-items-center font-weight-bold"},"Iglooroom",i("ir-icon",{icon:"la la-long-arrow-right"})),i("div",{class:"col-6 font-weight-bold"},"Channel Manager"))),this.hostRoom.map(((t,e)=>this._renderMapping(t,this.mapState[e],e))))))}static get watchers(){return{map:["mapChangedHandler"]}}};const v=".modal-header{border:none !important}.modal-footer{border:none !important}.backdropModal{background-color:rgba(0, 0, 0, 0.5);z-index:1000;position:fixed;top:0;left:0;height:100vh;width:100%;opacity:0;cursor:pointer;transition:opacity 0.3s ease-in-out;pointer-events:none}.backdropModal.active{opacity:1 !important;pointer-events:all}.modal{z-index:1001 !important}";const y=class{constructor(i){t(this,i);this.confirmModal=e(this,"confirmModal",7);this.cancelModal=e(this,"cancelModal",7);this.rightBtnActive=true;this.leftBtnActive=true;this.rightBtnText="Close";this.leftBtnText="Confirm";this.rightBtnColor="primary";this.leftBtnColor="secondary";this.btnPosition="right";this.isOpen=false;this.item={}}async closeModal(){this.isOpen=false}async openModal(){this.isOpen=true}btnClickHandler(t){let e=t.target;let i=e.name;if(i===this.leftBtnText){this.confirmModal.emit(this.item)}else if(i===this.rightBtnText){this.cancelModal.emit();this.closeModal()}}render(){return[i("div",{class:`backdropModal ${this.isOpen?"active":""}`,onClick:()=>{this.closeModal()}}),i("div",{class:{modal:true,fade:true,show:this.isOpen},tabindex:"-1",style:{display:this.isOpen?"block":"none"}},i("div",{class:"modal-dialog"},i("div",{class:"modal-content"},i("div",{class:"modal-body"},i("slot",null)),i("div",{class:`modal-footer d-flex justify-content-${this.btnPosition==="center"?"center":this.btnPosition==="left"?"start":"end"}`},this.leftBtnActive&&i("ir-button",{icon:"",btn_color:this.leftBtnColor,btn_block:true,text:this.leftBtnText,name:this.leftBtnText}),this.rightBtnActive&&i("ir-button",{icon:"",btn_color:this.rightBtnColor,btn_block:true,text:this.rightBtnText,name:this.rightBtnText})))))]}};y.style=v;const x=class{constructor(i){t(this,i);this.selectChange=e(this,"selectChange",7);this.count=0;this.name=undefined;this.data=undefined;this.label="<label>";this.selectedValue=null;this.required=undefined;this.LabelAvailable=true;this.firstOption="Select";this.selectStyle=true;this.submited=false;this.size="md";this.textSize="md";this.labelPosition="left";this.labelBackground="light";this.labelColor="dark";this.labelBorder="none";this.labelWidth=3;this.initial=true;this.valid=false}watchHandler(t){if(t!==null&&this.required){this.valid=true}}watchHandler2(t){if(t&&this.required){this.initial=false}}componentwillload(){}disconnectedCallback(){}handleSelectChange(t){if(this.required){this.initial=false;this.valid=t.target.checkValidity();this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}else{this.selectedValue=t.target.value;this.selectChange.emit(this.selectedValue)}}render(){let t="form-control";let e=i("div",{class:`input-group-prepend col-${this.labelWidth} p-0 text-${this.labelColor} border-${this.labelBorder}`},i("label",{class:`input-group-text ${this.labelPosition==="right"?"justify-content-end":this.labelPosition==="center"?"justify-content-center":""} bg-${this.labelBackground} flex-grow-1 text-${this.labelColor} border-${this.labelBorder==="none"?0:this.labelBorder} `},this.label,this.required?"*":""));if(this.selectStyle===false){t=""}if(this.required&&!this.valid&&!this.initial){t=`${t} border-danger`}if(!this.LabelAvailable){e=""}return i("div",{class:"form-group"},i("div",{class:"input-group row m-0"},e,i("select",{class:`${t} form-control-${this.size} text-${this.textSize} col-${12-this.labelWidth}`,onInput:this.handleSelectChange.bind(this),required:this.required},i("option",{value:null},this.firstOption),this.data.map((t=>{if(this.selectedValue===t.value){return i("option",{selected:true,value:t.value},t.text)}else{return i("option",{value:t.value},t.text)}})))))}static get watchers(){return{selectedValue:["watchHandler"],submited:["watchHandler2"]}}};const w=".backdrop{position:fixed;top:0;left:0;width:100%;height:100vh;cursor:pointer;background:rgba(0, 0, 0, 0.5);z-index:99;transition:all 0.5s;opacity:0;pointer-events:none;transition:all 0.5s}.backdrop.active{opacity:1;pointer-events:all}.sidebar-right{position:fixed;top:0;right:-100%;bottom:0;width:var(--sidebar-width, 30rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:200;overflow-y:hidden;color:var(--sidebar-color, #000);background-color:var(--sidebar-backgound, #fff);padding:0.5rem}.sidebar-right.active{right:0;overflow-y:scroll}.sidebar-left{position:fixed;top:0;left:-100%;bottom:0;width:var(--sidebar-width, 30rem);max-width:100%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);transition:all 0.5s;z-index:200;overflow-y:hidden;color:var(--sidebar-color, #000);background:var(--sidebar-backgound, #fff);padding:0.5rem}.sidebar-left.active{left:0;overflow-y:scroll}.close{position:absolute;top:0.5rem;right:1rem;width:1rem;height:1rem;cursor:pointer}";const k=class{constructor(i){t(this,i);this.irSidebarToggle=e(this,"irSidebarToggle",7);this.name=undefined;this.side="right";this.open=false}async toggleSidebar(){this.irSidebarToggle.emit(this.open)}render(){let t="";if(this.open){t="active"}else{t=""}console.log(this.open);console.log(t);console.log(this.side);return[i("div",{class:`backdrop ${t}`,onClick:()=>{this.toggleSidebar()}}),i("div",{class:`sidebar-${this.side} ${t}`},i("a",{class:"close",onClick:()=>{this.toggleSidebar()}},i("ir-icon",{icon:"ft-x"})),i("slot",null))]}};k.style=w;const C=class{constructor(i){t(this,i);this.openSidebar=e(this,"openSidebar",7)}handleCreate(){this.openSidebar.emit()}render(){return i("div",{class:"card-head"},i("div",{class:"input-group input-group-sm"},i("input",{type:"text",class:"form-control border-light",placeholder:"Search"}),i("div",{class:"input-group-append"}),i("button",{class:"ml-1 btn btn-primary btn-sm openSidebar",onClick:()=>this.handleCreate()},"Create")),i("div",{class:"container-fluid"},i("div",{class:"row"},i("div",{class:"col-3 p-1 section-title"},"Title ",i("ir-icon",{icon:"la la-unsorted"})),i("div",{class:"col-3 p-1 section-title"},"Channel ",i("ir-icon",{icon:"la la-unsorted"})),i("div",{class:"col-3 p-1 section-title"},"Status ",i("ir-icon",{icon:"la la-unsorted"})))))}};export{n as ir_button,a as ir_channel_manager,r as ir_dropdown,d as ir_general_settings,c as ir_icon,h as ir_input_text,p as ir_list_item,m as ir_loader,g as ir_mapping,y as ir_modal,x as ir_select,k as ir_sidebar,C as ir_topbar};
//# sourceMappingURL=p-638b8f01.entry.js.map