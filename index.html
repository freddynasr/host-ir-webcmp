<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
  <!-- BEGIN: Head-->

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui" />
    <meta
      name="description"
      content="Modern admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities with bitcoin dashboard." />
    <meta
      name="keywords"
      content="admin template, modern admin template, dashboard template, flat admin template, responsive admin template, web app, crypto dashboard, bitcoin dashboard" />
    <meta name="author" content="PIXINVENT" />
    <title>IR Guest Info</title>

    <link
      rel="apple-touch-icon"
      href="./app-assets/images/ico/apple-icon-120.png" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="./app-assets/images/ico/favicon.ico" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700"
      rel="stylesheet" />

    <!-- BEGIN: Vendor CSS-->
    <link
      rel="stylesheet"
      type="text/css"
      href="./app-assets/vendors/css/vendors.min.css" />
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link
      rel="stylesheet"
      type="text/css"
      href="./app-assets/css/bootstrap.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./app-assets/css/bootstrap-extended.css" />
    <link rel="stylesheet" type="text/css" href="./app-assets/css/colors.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./app-assets/css/components.css" />
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link
      rel="stylesheet"
      type="text/css"
      href="./app-assets/css/core/menu/menu-types/horizontal-menu.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./app-assets/css/core/colors/palette-gradient.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./app-assets/css/pages/login-register.css" />
    <!-- END: Page CSS-->

    <script type="module" src="./ir-webcmp/ir-webcmp.esm.js"></script>

    <style></style>
  </head>

  <body>
    <ir-booking-details></ir-booking-details>
    <!-- <ir-channel-select></ir-channel-select> -->

    <!-- <ir-input-text
      label-background="white"
      label-position="right"
      label-border="none"></ir-input-text> -->

    <script>
      const irBookingDetails = document.querySelector("ir-booking-details");
      let Ticket =
        "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2OTQxODE4MDgsIkNMQUlNLTAxIjoicktLMi9DY1dQQnM9IiwiQ0xBSU0tMDIiOiI5UStMQm93VTl6az0iLCJDTEFJTS0wMyI6Ilp3Tys5azJoTzUwPSIsIkNMQUlNLTA0IjoiWnNHbms0dWJVUXJxZXprS2JsUFp5SEh3N1VIdmk4M2xleTJqUWRPTGZJOVpKd3V5ZmRGSEVBPT0ifQ.lELHoDRwTAhpBkvX4DU5XifYWXrKXiZLVzy-PpqVU2U";

      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");

      var raw = JSON.stringify({
        BH_ID: 13509433,
        LANGUAGE_ABBREVIATION: "EN",
        EXCLUDE_AC: false,
        EXCLUDE_BH_POLICIES: false,
      });

      var requestOptions = {
        method: "POST",
        headers: myHeaders,
        body: raw,
        redirect: "follow",
      };

      fetch(
        `https://gateway.igloorooms.com/IR/Get_Bh_Full?Ticket=${Ticket}`,
        requestOptions
      )
        .then((response) => response.json())
        .then((result) => {
          irBookingDetails.bookingDetails = result.My_Result;
        })
        .catch((error) => console.log("error", error));
    </script>

    <script>
      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");

      var raw = JSON.stringify({
        TBL_NAME: "_ARRIVAL_TIME",
      });

      var requestOptions = {
        method: "POST",
        headers: myHeaders,
        body: raw,
        redirect: "follow",
      };

      fetch(
        `https://gateway.igloorooms.com/IR/Get_Setup_Entries_By_TBL_NAME?Ticket=${Ticket}`,
        requestOptions
      )
        .then((response) => response.json())
        .then((result) => {
          irBookingDetails.arrivalTimes = result.My_Result;
        })
        .catch((error) => console.log("error", error));
    </script>

    <script>
      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");

      var raw = JSON.stringify({
        TBL_NAME: "_BOOK_STATUS",
      });

      var requestOptions = {
        method: "POST",
        headers: myHeaders,
        body: raw,
        redirect: "follow",
      };

      fetch(
        `https://gateway.igloorooms.com/IR/Get_Setup_Entries_By_TBL_NAME?Ticket=${Ticket}`,
        requestOptions
      )
        .then((response) => response.json())
        .then((result) => {
          irBookingDetails.bookingStatuses = result.My_Result;
        })
        .catch((error) => console.log("error", error));
    </script>

    <script>
      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");

      var raw = JSON.stringify({
        TBL_NAME: "_FOOD_ARRANGE_CAT",
      });

      var requestOptions = {
        method: "POST",
        headers: myHeaders,
        body: raw,
        redirect: "follow",
      };

      fetch(
        `https://gateway.igloorooms.com/IR/Get_Setup_Entries_By_TBL_NAME?Ticket=${Ticket}`,
        requestOptions
      )
        .then((response) => response.json())
        .then((result) => {
          irBookingDetails.foodArrangeCats = result.My_Result;
        })
        .catch((error) => console.log("error", error));

      document.addEventListener("getSetupData", (e) => {
        fetchDataFromAPI();
      });
      function fetchDataFromAPI() {
        try {
          const myHeaders = new Headers();
          myHeaders.append("Content-Type", "application/json");
          const raw = JSON.stringify({
            language: "EN",
          });
          const requestOptions = {
            method: "POST",
            headers: myHeaders,
            body: raw,
            redirect: "follow",
          };
          const response = fetch(
            `https://gateway.igloorooms.com/IR/Get_Exposed_Countries?Ticket=${Ticket}`,
            requestOptions
          )
            .then((response) => response.json())
            .then((result) => {
              irBookingDetails.setupDataCountries = result.My_Result.map(
                (item) => {
                  return {
                    value: item.id,
                    text: item.name,
                  };
                }
              );
              irBookingDetails.setupDataCountriesCode = result.My_Result.map(
                (item) => {
                  return {
                    value: item.phone_prefix,
                    text: item.phone_prefix,
                  };
                }
              );
            });
        } catch (error) {
          console.error("Error fetching data:", error);
          return null;
        }
      }

      irBookingDetails.addEventListener("submitForm", (e) => {
        console.log(e.detail);
      });

      irBookingDetails.addEventListener("pressCheckIn", (e) => {
        console.log("Check In", e.detail);
      });
      irBookingDetails.addEventListener("pressCheckOut", (e) => {
        console.log("Check out", e.detail);
      });
    </script>

    <script src="./app-assets/vendors/js/vendors.min.js"></script>
    <script src="./app-assets/vendors/js/ui/jquery.sticky.js"></script>
    <script src="./app-assets/vendors/js/charts/jquery.sparkline.min.js"></script>
    <script src="./app-assets/js/core/app-menu.js"></script>
    <script src="./app-assets/js/core/app.js"></script>
    <script src="./app-assets/js/scripts/ui/breadcrumbs-with-stats.js"></script>
  </body>
</html>
